local a=exports["es_extended"]:getSharedObject()function DisableDefaultHUD()CreateThread(function()while true do HideHudComponentThisFrame(7)HideHudComponentThisFrame(9)Wait(0)end end)end;CreateThread(function()local b=RequestScaleformMovie("minimap")SetRadarBigmapEnabled(false,false)while true do BeginScaleformMovieMethod(b,"SETUP_HEALTH_ARMOUR")ScaleformMovieMethodAddParamInt(3)EndScaleformMovieMethod()if IsBigmapActive()or IsBigmapFull()then SetRadarBigmapEnabled(false,false)end;Wait(0)end end)CreateThread(function()while true do local playerPed=PlayerPedId()if IsPedInAnyVehicle(playerPed,false)then DisplayRadar(true)SetRadarBigmapEnabled(false,false)end;Wait(500)end end)CreateThread(function()DisableDefaultHUD()SetRadarBigmapEnabled(false,false)end)local c=a.GetPlayerData()local d=Config;local e=false;local f=false;local g=0;local h=0;local i=100;local j=100;local k=true;local l=false;local m=false;local n;RegisterNetEvent('pma-voice:radioActive')AddEventHandler("pma-voice:radioActive",function(o)radio=o end)RegisterNetEvent('hud:client:UpdateNitrous',function(p,q,r)if q==nil then g=0 else g=q end;nitroActive=r end)RegisterCommand(Config.command,function(s,t,u)local v=lib.inputDialog('Hud Settings',{{type='checkbox',label='Visible logo',checked=k},{type='checkbox',label='Visible streets',checked=l},{type='checkbox',label='Hide/ Show Hud',checked=m},{type='checkbox',label='Restart Map'},{type='checkbox',label='Zapnout cinematic mod',checked=f}})if v then if v[1]==true then k=true else k=false end;if v[2]==true then l=true else l=false end;if v[3]==true then m=true else m=false end;if v[4]==true then restartmap()end;if v[5]==true then SendNUIMessage({action="Hide"})CreateThread(function()while f do for w=0,1.0,1.0 do DrawRect(0.0,0.0,2.0,0.2,0,0,0,255)DrawRect(0.0,w,2.0,0.2,0,0,0,255)end;DisplayRadar(false)Wait(0)end end)f=true;m=true elseif v[5]==false then f=false;SendNUIMessage({action="Display"})m=false end end end)Citizen.CreateThread(function()setupmap()restartmap()while true do if e then SendNUIMessage({Postal=n,PlayerId=GetPlayerServerId(NetworkGetPlayerIndexFromPed(PlayerPedId())),Hidehud=m,autoHide=Config.autohide,carHud=Config.CarHud,streetOnlyOnCar=l,useLogo=k,logo=Config.LogoURL,speedUnit=Config.SpeedUnit,health=GetEntityHealth(PlayerPedId())-100,water=math.ceil(GetPlayerUnderwaterTimeRemaining(PlayerId()))*10,shield=GetPedArmour(PlayerPedId()),hunger=i,thirst=j,pauseMenu=PauseMenuState(),stress=h,voiceMode=LocalPlayer.state['proximity'].index,isPedOnVehicle=IsPedInAnyVehicle(PlayerPedId()),IsPedSwimming=IsPedSwimmingUnderWater(PlayerPedId()),talking=NetworkIsPlayerTalking(PlayerId()),isRadioTalking=radio})DisplayRadar(IsPedInAnyVehicle(PlayerPedId()))Citizen.Wait(350)else DisplayRadar(IsPedInAnyVehicle(PlayerPedId()))SendNUIMessage({pauseMenu=PauseMenuState()})Citizen.Wait(1000)end end end)RegisterNetEvent('esx:playerLoaded',function()Wait(2500)e=true;TriggerEvent('esx_status:getStatus','hunger',function(i)TriggerEvent('esx_status:getStatus','thirst',function(j)local i=i.getPercent()local j=j.getPercent()end)end)end)AddEventHandler('onClientResourceStart',function()Wait(500)e=true;Wait(2000)TriggerEvent('esx_status:getStatus','hunger',function(i)TriggerEvent('esx_status:getStatus','thirst',function(j)local i=i.getPercent()local j=j.getPercent()end)end)end)RegisterNetEvent('hud:client:UpdateNeeds',function(x,y)i=x;j=y end)AddEventHandler('esx_status:onTick',function(z)local i,j;for w=1,#z do if z[w].name=='thirst'then old_thirst=math.floor(z[w].percent)end;if z[w].name=='hunger'then old_hunger=math.floor(z[w].percent)end end;i=old_hunger;j=old_thirst;TriggerEvent('hud:client:UpdateNeeds',i,j)end)function PauseMenuState()if e then return IsPauseMenuActive()end;return true end;CreateThread(function()while true do isUsed=false;if IsPedInAnyVehicle(PlayerPedId())then local A=GetVehicleClass(GetVehiclePedIsIn(PlayerPedId()))if A==8 or A==14 or A==15 or A==16 then SendNUIMessage({vehType='noBelt'})elseif A==13 then SendNUIMessage({vehType='noExtras'})else SendNUIMessage({vehType='allExtras'})end;if Config.SpeedUnit=='KMH'then speed=GetEntitySpeed(GetVehiclePedIsIn(PlayerPedId()))*3.6 elseif Config.SpeedUnit=='MPH'then speed=GetEntitySpeed(GetVehiclePedIsIn(PlayerPedId()))*2.23694 end;isUsed=true;SendNUIMessage({motor=GetVehicleEngineHealth(GetVehiclePedIsIn(PlayerPedId()))/10,speed=speed,fuel=GetVehicleFuelLevel(GetVehiclePedIsIn(PlayerPedId())),nosLevel=g})else SetTimeout(1000,function()isUsed=false end)end;if isUsed then Wait(150)else Wait(1000)end end end)Citizen.CreateThread(function()local B=0;local C=0;local D=''local E={[0]='N',[45]='NW',[90]='W',[135]='SW',[180]='S',[225]='SE',[270]='E',[315]='NE',[360]='N'}while true do Wait(1000)for F,G in pairs(E)do direction=GetEntityHeading(PlayerPedId())if math.abs(direction-F)<22.5 then direction=G;break end end;SendNUIMessage({streetname=direction..' | '..D})local H=GetEntityCoords(PlayerPedId(),true)local I,J=Citizen.InvokeNative(0x2EB41072B4C1E4C0,H.x,H.y,H.z,Citizen.PointerValueInt(),Citizen.PointerValueInt())local K={}if not((I==B or I==C)and(J==B or J==C))then B=I;C=J end;if B~=0 then table.insert(K,GetStreetNameFromHashKey(B))end;if C~=0 then table.insert(K,GetStreetNameFromHashKey(C))end;local L=table.concat(K," & ")if D~=L then D=L;SendNUIMessage({streetname=direction..' | '..L})end;if IsPauseMenuActive()then isPaused=true;SendNUIMessage({close=true})elseif not IsPauseMenuActive()and isPaused then SendNUIMessage({streetname=direction..' | '..L})isPaused=false end end end)function CinematicHud()end;function setupmap()RequestStreamedTextureDict("minimap",false)while not HasStreamedTextureDictLoaded("minimap")do Wait(100)end;AddReplaceTexture("platform:/textures/graphics","radarmasksm","minimap","radarmasksm")SetMinimapClipType(0)local M=1920/1080;local N,O=GetActiveScreenResolution()local P=N/O;local Q,R=0,0;if P>M then local S=M-P;Q=S/3.6 end;SetMinimapComponentPosition("minimap","L","B",-0.0045+Q,-0.022+R,0.150,0.188888)SetMinimapComponentPosition("minimap_mask","L","B",0.020+Q,0.050+R,0.111,0.159)SetMinimapComponentPosition("minimap_blur","L","B",-0.03+Q,-0.0005+R,0.266,0.237)SetRadarBigmapEnabled(false,false)Wait(500)SetRadarBigmapEnabled(false,false)end;function restartmap()SetRadarBigmapEnabled(true,true)Wait(10)SetRadarBigmapEnabled(false,false)end;local T=LoadResourceFile(GetCurrentResourceName(),GetResourceMetadata(GetCurrentResourceName(),'postal_file'))local U=json.decode(T)local V=nil;local W=nil;Citizen.CreateThread(function()while true do local X,Y,Z=table.unpack(GetEntityCoords(GetPlayerPed(-1)))local _=-1;local a0=-1;for w,a1 in ipairs(U)do local a2=math.sqrt((X-a1.x)^2+(Y-a1.y)^2)if _==-1 or a2<_ then a0=w;_=a2 end end;if a0~=-1 then V={dist=_,i=a0}end;Wait(500)end end)CreateThread(function()while true do if V then n=U[V.i].code end;Wait(500)end end)RegisterCommand('postal',function(s,t,T)if#t<1 then if W then RemoveBlip(W.hndl)W=nil end;return end;local a3=string.upper(t[1])local a4=nil;for p,a1 in ipairs(U)do if string.upper(a1.code)==a3 then a4=a1 end end;if a4 then if W then RemoveBlip(W.hndl)end;W={hndl=AddBlipForCoord(a4.x,a4.y,0.0),p=a4}SetBlipRoute(W.hndl,true)SetBlipColour(W.hndl,3)SetBlipRouteColour(W.hndl,d.blip.color)BeginTextCommandSetBlipName('STRING')AddTextComponentSubstringPlayerName("<FONT FACE='Oswald'>"..d.blip.textFormat:format(W.p.code).."</FONT>")EndTextCommandSetBlipName(W.hndl)exports['okokNotify']:Alert('POSTAL','Nastavuji postal na',2500,'info',playSound)else exports['okokNotify']:Alert('POSTAL','Tento postal neexistuje',2500,'info',playSound)end end)local a5=false;if a5 then local a6=json.decode(T)local a7=0;RegisterCommand('setnext',function(a8,t,T)local a3=tonumber(t[1])if a3~=nil then a7=a3;print('next '..a7)return end;print('invalid '..a3)end)RegisterCommand('next',function(a8,t,T)for w,a2 in ipairs(a6)do if a2.code==tostring(a7)then print('duplicate '..a7)return end end;local a9=GetEntityCoords(GetPlayerPed(-1))table.insert(a6,{code=tostring(a7),x=a9.x,y=a9.y})print('insert '..a7)a7=a7+1 end)RegisterCommand('rl',function(a8,t,T)if#a6>0 then local z=table.remove(a6,#a6)print('remove '..z.code)print('next '..a7)a7=a7-1 else print('invalid')end end)RegisterCommand('remove',function(a8,t,T)if#t<1 then print('invalid')else for w,a2 in ipairs(a6)do if a2.code==t[1]then table.remove(a6,w)print('remove '..a2.code)return end end;print('invalid')end end)RegisterCommand('json',function(a8,t,T)print(json.encode(a6))end)end;if Config.EnableCruise then cruiseIsOn=false;cruiseSpeed=999.0;RegisterKeyMapping('omezovac','Cruise Control','keyboard',Config.DefaultCruiseControlKey)local aa=0;Citizen.CreateThread(function()while true do Citizen.Wait(1700)if aa>0 then Citizen.Wait(3500)aa=0 end end end)RegisterCommand('omezovac',function()if aa>=3 then if Config.EnableSpamNotification then Config.Notification(Config.Notifications["spam"]["message"],Config.Notifications["spam"]["type"])end;return end;local ab=playerPed;local ac=GetVehiclePedIsIn(ab,false)if GetPedInVehicleSeat(ac,-1)==ab and ac~=0 then cruiseIsOn=not cruiseIsOn;if cruiseIsOn then Config.Notification(Config.Notifications["cruise_actived"]["message"],Config.Notifications["cruise_actived"]["type"])else Config.Notification(Config.Notifications["cruise_disabled"]["message"],Config.Notifications["cruise_disabled"]["type"])end;local ad=GetEntitySpeed(ac)cruiseSpeed=ad;local ae=cruiseIsOn and cruiseSpeed or GetVehicleHandlingFloat(ac,"CHandlingData","fInitialDriveMaxFlatVel")SetEntityMaxSpeed(ac,ae)SendNUIMessage({type="toggle_cruise",toggle=cruiseIsOn})aa=aa+1 end end,false)end;_DisplayRadar=DisplayRadar;DisplayRadar=function()end;Citizen.CreateThread(function()while true do Wait(1000)if IsPedInAnyVehicle(PlayerPedId(),false)then _DisplayRadar(true)else _DisplayRadar(false)end end end)exports('ToggleCruiser',function(ae)if not cruiseIsOn then return end;local ac=GetVehiclePedIsIn(PlayerPedId())local ad=GetEntitySpeed(ac)if cruiseSpeed<ae then SetEntityMaxSpeed(ac,cruiseSpeed)else cruiseSpeed=ae end end)local af=false;local ag=false;local ah=false;local ai=false;RegisterNetEvent("s:statusUpdated")AddEventHandler("s:statusUpdated",function(aj)ai=aj=="dead"if aj=="spawned"then aj=aj=="spawned"end end)AddEventHandler('plane_sensors:toggle',function()if not HasStreamedTextureDictLoaded("flightinstruments")then RequestStreamedTextureDict("flightinstruments",true)while not HasStreamedTextureDictLoaded("flightinstruments")do Wait(1)end end;while af do local speed=GetEntitySpeed(GetVehiclePedIsIn(PlayerPedId()))*1.943844492;local ak=GetEntityCoords(PlayerPedId()).z*3.28084;local al=GetEntityHeading(GetVehiclePedIsIn(PlayerPedId()))local am=GetEntityVelocity(GetVehiclePedIsIn(PlayerPedId())).z*196.850394;if speed<40 then speed=40 end;if speed>200 then speed=200 end;if ak<0 then ak=0 end;if am>2000 then am=2000 elseif am<-2000 then am=-2000 end;DrawSprite("flightinstruments","speedometer",0.95,0.20,0.08,0.08*1.77777778,0,255,255,255,255)DrawSprite("flightinstruments","speedometer_needle",0.95,0.20,0.08,0.08*1.77777778,(speed-20)/20*36,255,255,255,255)DrawSprite("flightinstruments","altimeter",0.95,0.35,0.08,0.08*1.77777778,0,255,255,255,255)DrawSprite("flightinstruments","altimeter-needle100",0.95,0.35,0.08,0.08*1.77777778,ak/100*36,255,255,255,255)DrawSprite("flightinstruments","altimeter-needle1000",0.95,0.35,0.08,0.08*1.77777778,ak/1000*36,255,255,255,255)DrawSprite("flightinstruments","altimeter-needle10000",0.95,0.35,0.08,0.08*1.77777778,ak/10000*36,255,255,255,255)DrawSprite("flightinstruments","heading",0.95,0.50,0.08,0.08*1.77777778,0,255,255,255,255)DrawSprite("flightinstruments","heading_needle",0.95,0.50,0.08,0.08*1.77777778,al,255,255,255,255)DrawSprite("flightinstruments","verticalspeedometer",0.95,0.65,0.08,0.08*1.77777778,0,255,255,255,255)DrawSprite("flightinstruments","verticalspeedometer_needle",0.95,0.65,0.08,0.08*1.77777778,270+am/1000*90,255,255,255,255)Citizen.Wait(1)end end)Citizen.CreateThread(function()while true do wait=1000;if IsPedInAnyPlane(PlayerPedId())or IsPedInAnyHeli(PlayerPedId())then if not ag then af=not af;ag=not ag;TriggerEvent('plane_sensors:toggle')end else if not IsPedInAnyPlane(PlayerPedId())or not IsPedInAnyHeli(PlayerPedId())then af=false;ag=false end end;if ai then af=false end;Citizen.Wait(wait)end end)RegisterCommand('vypnout_senzor',function()if IsPedInAnyPlane(PlayerPedId())or IsPedInAnyHeli(PlayerPedId())then af=not af;if af then TriggerEvent('plane_sensors:toggle')end end end,false)